import { useEffect, useRef, useState } from "react"

const UploadFile = ({returnedValue,fromApi})=>{
    const inputRef = useRef(null)
    const handleChange = (e)=>{
        setPhoto(URL.createObjectURL(e.target.files[0]))
        returnedValue(e.target.files[0])
        setFile(e.target.files[0])
        
    }
    const [file, setFile] = useState({})
    const [photo, setPhoto] = useState("")
    useEffect(()=>setPhoto(fromApi),[fromApi])
    return <div className="flex flex-col gap-4">
        <input onChange={handleChange} accept="image/*" multiple={false} type="file" ref={inputRef} className="hidden" />
        <div style={{border : "2px dotted grey", borderRadius:"20px"}} className="flex flex-col items-center gap-2 justify-center p-4 ">
            <div onClick={()=>inputRef.current.click()} className="cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" width="70" height="93" viewBox="0 0 100 123" fill="none">
                    <g clipPath="url(#clip0_281_17)">
                    <path d="M64.64 13L86.77 36.21H64.64V13ZM42.58 71.67C42.0164 72.3224 41.2167 72.7243 40.3569 72.7871C39.497 72.8499 38.6474 72.5686 37.995 72.005C37.3426 71.4414 36.9407 70.6417 36.8779 69.7819C36.8151 68.922 37.0964 68.0724 37.66 67.42L47.08 56.51C47.6458 55.859 48.4465 55.4587 49.3068 55.3969C50.1671 55.335 51.0169 55.6166 51.67 56.18C51.8108 56.3091 51.9444 56.446 52.07 56.59L61.37 66.87C61.9468 67.5078 62.2467 68.3487 62.2035 69.2076C62.1604 70.0666 61.7778 70.8732 61.14 71.45C60.5022 72.0268 59.6613 72.3267 58.8024 72.2835C57.9434 72.2404 57.1368 71.8578 56.56 71.22L52.8 67.07V82.52C52.8 82.9481 52.7157 83.372 52.5518 83.7675C52.388 84.1631 52.1479 84.5224 51.8452 84.8252C51.5425 85.1279 51.1831 85.368 50.7875 85.5318C50.392 85.6957 49.9681 85.78 49.54 85.78C49.1119 85.78 48.688 85.6957 48.2925 85.5318C47.8969 85.368 47.5376 85.1279 47.2348 84.8252C46.9321 84.5224 46.692 84.1631 46.5282 83.7675C46.3643 83.372 46.28 82.9481 46.28 82.52V67.38L42.58 71.67ZM24.22 85.42C24.22 84.5554 24.5635 83.7262 25.1748 83.1148C25.7862 82.5035 26.6154 82.16 27.48 82.16C28.3446 82.16 29.1738 82.5035 29.7852 83.1148C30.3965 83.7262 30.74 84.5554 30.74 85.42V92.88H68.36V85.42C68.3355 84.9774 68.4014 84.5344 68.5539 84.1181C68.7064 83.7019 68.9422 83.3211 69.2469 82.9991C69.5515 82.677 69.9187 82.4205 70.3259 82.2452C70.733 82.0699 71.1717 81.9795 71.615 81.9795C72.0583 81.9795 72.497 82.0699 72.9041 82.2452C73.3113 82.4205 73.6785 82.677 73.9831 82.9991C74.2878 83.3211 74.5236 83.7019 74.6761 84.1181C74.8286 84.5344 74.8945 84.9774 74.87 85.42V96.14C74.87 97.0046 74.5265 97.8338 73.9152 98.4452C73.3038 99.0565 72.4746 99.4 71.61 99.4H27.48C26.6154 99.4 25.7862 99.0565 25.1748 98.4452C24.5635 97.8338 24.22 97.0046 24.22 96.14V85.42ZM99.08 39.19C99.23 38.62 97.9 37.12 96.4 35.63L63.8 1.36C63.4633 0.939857 63.0375 0.599858 62.5532 0.364637C62.0689 0.129416 61.5384 0.00486253 61 0L6.62 0C4.86427 0 3.18044 0.697462 1.93895 1.93895C0.697462 3.18044 0 4.86427 0 6.62L0 116.26C0 117.129 0.171231 117.99 0.503918 118.793C0.836604 119.597 1.32423 120.326 1.93895 120.941C2.55368 121.556 3.28346 122.043 4.08664 122.376C4.88981 122.709 5.75065 122.88 6.62 122.88H92.46C93.3293 122.88 94.1902 122.709 94.9934 122.376C95.7965 122.043 96.5263 121.556 97.141 120.941C97.7558 120.326 98.2434 119.597 98.5761 118.793C98.9088 117.99 99.08 117.129 99.08 116.26V39.19ZM91.68 43.61V115.48H7.4V7.37H57.25V39.9C57.25 40.3906 57.3472 40.8763 57.5362 41.3291C57.7251 41.7818 58.002 42.1926 58.3507 42.5376C58.6995 42.8826 59.1132 43.1551 59.568 43.3392C60.0227 43.5232 60.5094 43.6153 61 43.61H91.68Z" fill="#19770D"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_281_17">
                    <rect width="99.09" height="122.88" fill="white"/>
                    </clipPath>
                    </defs>
                </svg>
            </div>
            <div >Upload here</div>
        </div>
        { (photo) && <div className="flex justify-between items-center">
            <div className="flex items-center gap-2">
                <img style={{width: "40px",height:"40px",borderRadius:"50%",objectFit:"cover"}} src={photo} alt="img" />
                <div>{ file.name} </div>
            </div>
            <div>
                <div onClick={()=>setPhoto("")} className="cursor-pointer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="19" height="21" viewBox="0 0 19 21" fill="none">
                        <g clipPath="url(#clip0_283_20)">
                        <path fillRule="evenodd" clipRule="evenodd" d="M0.407301 1.64626H7.05341V0.642578C7.05341 0.28916 7.34653 0 7.70593 0H11.3753C11.7345 0 12.0278 0.288989 12.0278 0.642578V1.64644H18.5929C18.8173 1.64644 19.0002 1.82708 19.0002 2.04788V4.0156H0V2.04771C0 1.8269 0.183086 1.64626 0.407301 1.64626ZM1.50807 5.05945H17.6337C17.9699 5.05945 18.2751 5.33272 18.2447 5.66169L16.88 20.3981C16.8498 20.7272 16.6041 20.9998 16.2686 20.9998H2.85389C2.51826 20.9998 2.27218 20.7278 2.24233 20.3981L0.896515 5.66169C0.866665 5.33152 1.17158 5.05945 1.50807 5.05945ZM11.9877 7.34829H13.6999V18.5104H11.9877V7.34829ZM5.21874 7.34829H6.93107V18.5104H5.21874V7.34829ZM8.60279 7.34829H10.3155V18.5104H8.60279V7.34829Z" fill="#E30E0E"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_283_20">
                        <rect width="19" height="21" fill="white"/>
                        </clipPath>
                        </defs>
                        </svg>
                </div>

            </div>
        </div>}
    </div>
}
export default UploadFile